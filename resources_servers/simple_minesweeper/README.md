Note: Currently the branch is checked out from the `text_based_game` branch (which is for the sudoku game) since I need the `simple_game_agent.py` (added in the `text_based_game` branch) to test. Once that branch is merged these extra diffs will vanish.

## Details 
This is a resource server for minesweeper text based game. The correctness is checked programtically. The reward is returned at each step (each call of the `make_move` function. The final reward is the sum)

**Dataset**: The dataset is proceduraly generated. You specify a `rows`, `cols`, `num_mines` and `max_turns` and the game generates the initial board.
 
For it to be compatible with current trajectory generation framework. We have a `simple_minesweeper.jsonl` that can be used to for trajectory generation. This would be changed later

## How to run

1. Download dataset

```
ng_download_dataset_from_gitlab \
    +dataset_name=simple_minesweeper \
    +version=0.0.1 \
    +artifact_fpath=simple_minesweeper.jsonl \
    +output_fpath=data/simple_wordle.jsonl
```

2. Start servers

```
ng_run "+config_paths=[responses_api_agents/simple_game_agent/configs/simple_game_agent.yaml,responses_api_models/openai_model/configs/openai_model.yaml,resources_servers/simple_minesweeper/configs/simple_minesweeper.yaml]" +simple_game_agent.responses_api_agents.simple_game_agent.resources_server.name=simple_minesweeper
```

3. Run trajectory collection
```
ng_collect_traj +agent_name=simple_game_agent +input_jsonl_fpath=data/simple_minesweeper.jsonl +output_jsonl_fpath=results/minesweep_run.jsonl
```

### Collected trajectory examples
```
{"responses_create_params": {"input": [], "tools": [{"name": "make_move", "parameters": {"type": "object", "properties": {"row": {"type": "integer", "description": "Row number (0-based)"}, "col": {"type": "integer", "description": "Column number (0-based)"}, "action_type": {"type": "string", "enum": ["reveal", "flag"], "description": "Action to perform: reveal a cell or toggle flag"}}, "required": ["row", "col", "action_type"], "additionalProperties": false}, "strict": true, "type": "function", "description": "Make a move in Minesweeper by revealing a cell or placing/removing a flag"}]}, "response": {"id": "resp_68bdd38592b48194b520f1a5c0c6a88c0830b80307d7b52a", "created_at": 1757270917.0, "error": null, "incomplete_details": null, "instructions": null, "metadata": {}, "model": "gpt-4.1-2025-04-14", "object": "response", "output": [{"arguments": "{\"row\":0,\"col\":0,\"action_type\":\"reveal\"}", "call_id": "call_L1CF5c4hmYgWpH3iMqzSpxHh", "name": "make_move", "type": "function_call", "id": "fc_68bdd38067dc8195a6ec547b4be943c80982d864dc419c4e", "status": "completed"}, {"call_id": "call_L1CF5c4hmYgWpH3iMqzSpxHh", "output": "{\"success\": true, \"message\": \"At turn 1, you successfully revealed cell (0, 0).\", \"game_state\": {\"rows\": 8, \"cols\": 8, \"num_mines\": 10, \"max_turns\": 20, \"grid\": [[0, 0, 1, -1, 2, 1, 0, 0], [1, 1, 2, 3, -1, 2, 0, 0], [2, -1, 2, 2, -1, 2, 1, 1], [2, -1, 3, 2, 1, 1, 1, -1], [1, 2, -1, 2, 1, 0, 1, 1], [0, 1, 2, -1, 1, 0, 0, 0], [1, 1, 1, 2, 2, 1, 0, 0], [-1, 1, 0, 1, -1, 1, 0, 0]], \"revealed\": [[true, true, true, false, false, false, false, false], [true, true, true, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false]], \"flags\": [[false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false]], \"first_reveal\": false, \"turn_count\": 1}, \"board_text\": \"    0  1  2  3  4  5  6  7\\n 0  0  0  1  .  .  .  .  . \\n 1  1  1  2  .  .  .  .  . \\n 2  .  .  .  .  .  .  .  . \\n 3  .  .  .  .  .  .  .  . \\n 4  .  .  .  .  .  .  .  . \\n 5  .  .  .  .  .  .  .  . \\n 6  .  .  .  .  .  .  .  . \\n 7  .  .  .  .  .  .  .  . \\n\", \"is_complete\": false, \"move_reward\": 0.0}", "type": "function_call_output", "id": null, "status": null}, {"arguments": "{\"row\":2,\"col\":0,\"action_type\":\"reveal\"}", "call_id": "call_gopAzOQxw8931WS0qLsk0qG3", "name": "make_move", "type": "function_call", "id": "fc_68bdd38195208190a0ccb5b829ca07d00c1cf725912f6940", "status": "completed"}, {"call_id": "call_gopAzOQxw8931WS0qLsk0qG3", "output": "{\"success\": true, \"message\": \"At turn 2, you successfully revealed cell (2, 0).\", \"game_state\": {\"rows\": 8, \"cols\": 8, \"num_mines\": 10, \"max_turns\": 20, \"grid\": [[0, 0, 1, -1, 2, 1, 0, 0], [1, 1, 2, 3, -1, 2, 0, 0], [2, -1, 2, 2, -1, 2, 1, 1], [2, -1, 3, 2, 1, 1, 1, -1], [1, 2, -1, 2, 1, 0, 1, 1], [0, 1, 2, -1, 1, 0, 0, 0], [1, 1, 1, 2, 2, 1, 0, 0], [-1, 1, 0, 1, -1, 1, 0, 0]], \"revealed\": [[true, true, true, false, false, false, false, false], [true, true, true, false, false, false, false, false], [true, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false]], \"flags\": [[false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false]], \"first_reveal\": false, \"turn_count\": 2}, \"board_text\": \"    0  1  2  3  4  5  6  7\\n 0  0  0  1  .  .  .  .  . \\n 1  1  1  2  .  .  .  .  . \\n 2  2  .  .  .  .  .  .  . \\n 3  .  .  .  .  .  .  .  . \\n 4  .  .  .  .  .  .  .  . \\n 5  .  .  .  .  .  .  .  . \\n 6  .  .  .  .  .  .  .  . \\n 7  .  .  .  .  .  .  .  . \\n\", \"is_complete\": false, \"move_reward\": 0.0}", "type": "function_call_output", "id": null, "status": null}, {"arguments": "{\"row\":1,\"col\":1,\"action_type\":\"reveal\"}", "call_id": "call_15pAxHN3G3G0oxYauHkl46Ld", "name": "make_move", "type": "function_call", "id": "fc_68bdd383458c81958314a8959a38adb8049a1944a5c631bc", "status": "completed"}, {"call_id": "call_15pAxHN3G3G0oxYauHkl46Ld", "output": "{\"success\": false, \"message\": \"At turn 3, you chose to reveal cell (1, 1), which has already been revealed.\", \"game_state\": {\"rows\": 8, \"cols\": 8, \"num_mines\": 10, \"max_turns\": 20, \"grid\": [[0, 0, 1, -1, 2, 1, 0, 0], [1, 1, 2, 3, -1, 2, 0, 0], [2, -1, 2, 2, -1, 2, 1, 1], [2, -1, 3, 2, 1, 1, 1, -1], [1, 2, -1, 2, 1, 0, 1, 1], [0, 1, 2, -1, 1, 0, 0, 0], [1, 1, 1, 2, 2, 1, 0, 0], [-1, 1, 0, 1, -1, 1, 0, 0]], \"revealed\": [[true, true, true, false, false, false, false, false], [true, true, true, false, false, false, false, false], [true, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false]], \"flags\": [[false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false]], \"first_reveal\": false, \"turn_count\": 3}, \"board_text\": \"    0  1  2  3  4  5  6  7\\n 0  0  0  1  .  .  .  .  . \\n 1  1  1  2  .  .  .  .  . \\n 2  2  .  .  .  .  .  .  . \\n 3  .  .  .  .  .  .  .  . \\n 4  .  .  .  .  .  .  .  . \\n 5  .  .  .  .  .  .  .  . \\n 6  .  .  .  .  .  .  .  . \\n 7  .  .  .  .  .  .  .  . \\n\", \"is_complete\": false, \"move_reward\": 0.0}", "type": "function_call_output", "id": null, "status": null}, {"arguments": "{\"row\":1,\"col\":0,\"action_type\":\"reveal\"}", "call_id": "call_WKWOd5HsR7NqESQ3RjCOjMNd", "name": "make_move", "type": "function_call", "id": "fc_68bdd384eac481968b8113171f22b2bf09e2c7ff44cd3f33", "status": "completed"}, {"call_id": "call_WKWOd5HsR7NqESQ3RjCOjMNd", "output": "{\"success\": false, \"message\": \"At turn 4, you chose to reveal cell (1, 0), which has already been revealed.\", \"game_state\": {\"rows\": 8, \"cols\": 8, \"num_mines\": 10, \"max_turns\": 20, \"grid\": [[0, 0, 1, -1, 2, 1, 0, 0], [1, 1, 2, 3, -1, 2, 0, 0], [2, -1, 2, 2, -1, 2, 1, 1], [2, -1, 3, 2, 1, 1, 1, -1], [1, 2, -1, 2, 1, 0, 1, 1], [0, 1, 2, -1, 1, 0, 0, 0], [1, 1, 1, 2, 2, 1, 0, 0], [-1, 1, 0, 1, -1, 1, 0, 0]], \"revealed\": [[true, true, true, false, false, false, false, false], [true, true, true, false, false, false, false, false], [true, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false]], \"flags\": [[false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false]], \"first_reveal\": false, \"turn_count\": 4}, \"board_text\": \"    0  1  2  3  4  5  6  7\\n 0  0  0  1  .  .  .  .  . \\n 1  1  1  2  .  .  .  .  . \\n 2  2  .  .  .  .  .  .  . \\n 3  .  .  .  .  .  .  .  . \\n 4  .  .  .  .  .  .  .  . \\n 5  .  .  .  .  .  .  .  . \\n 6  .  .  .  .  .  .  .  . \\n 7  .  .  .  .  .  .  .  . \\n\", \"is_complete\": false, \"move_reward\": 0.0}", "type": "function_call_output", "id": null, "status": null}, {"arguments": "{\"row\":2,\"col\":1,\"action_type\":\"reveal\"}", "call_id": "call_gWV3ABGwRodxWzjMCMFle9GQ", "name": "make_move", "type": "function_call", "id": "fc_68bdd38623fc819499035b7f8fe479500830b80307d7b52a", "status": "completed"}, {"call_id": "call_gWV3ABGwRodxWzjMCMFle9GQ", "output": "{\"success\": false, \"message\": \"Game over! You hit a mine at (2, 1)\", \"game_state\": {\"rows\": 8, \"cols\": 8, \"num_mines\": 10, \"max_turns\": 20, \"grid\": [[0, 0, 1, -1, 2, 1, 0, 0], [1, 1, 2, 3, -1, 2, 0, 0], [2, -1, 2, 2, -1, 2, 1, 1], [2, -1, 3, 2, 1, 1, 1, -1], [1, 2, -1, 2, 1, 0, 1, 1], [0, 1, 2, -1, 1, 0, 0, 0], [1, 1, 1, 2, 2, 1, 0, 0], [-1, 1, 0, 1, -1, 1, 0, 0]], \"revealed\": [[true, true, true, false, false, false, false, false], [true, true, true, false, false, false, false, false], [true, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false]], \"flags\": [[false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false]], \"first_reveal\": false, \"turn_count\": 5}, \"board_text\": \"    0  1  2  3  4  5  6  7\\n 0  0  0  1  .  .  .  .  . \\n 1  1  1  2  .  .  .  .  . \\n 2  2  .  .  .  .  .  .  . \\n 3  .  .  .  .  .  .  .  . \\n 4  .  .  .  .  .  .  .  . \\n 5  .  .  .  .  .  .  .  . \\n 6  .  .  .  .  .  .  .  . \\n 7  .  .  .  .  .  .  .  . \\n\", \"is_complete\": true, \"move_reward\": 0.0}", "type": "function_call_output", "id": null, "status": null}], "parallel_tool_calls": false, "temperature": 1.0, "tool_choice": "auto", "tools": [{"name": "make_move", "parameters": {"type": "object", "properties": {"row": {"type": "integer", "description": "Row number (0-based)"}, "col": {"type": "integer", "description": "Column number (0-based)"}, "action_type": {"type": "string", "enum": ["reveal", "flag"], "description": "Action to perform: reveal a cell or toggle flag"}}, "required": ["row", "col", "action_type"], "additionalProperties": false}, "strict": true, "type": "function", "description": "Make a move in Minesweeper by revealing a cell or placing/removing a flag"}], "top_p": 1.0, "background": false, "max_output_tokens": null, "max_tool_calls": 1, "previous_response_id": null, "prompt": null, "reasoning": {"effort": null, "generate_summary": null, "summary": null}, "service_tier": "default", "status": "completed", "text": {"format": {"type": "text"}, "verbosity": "medium"}, "top_logprobs": 0, "truncation": "disabled", "usage": {"input_tokens": 1308, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 25, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1333}, "user": null, "prompt_cache_key": null, "safety_identifier": null, "store": true, "input": [{"role": "user", "type": "message", "content": "You are playing the Minesweeper game.\nThe objective of the game is to reveal all cells that do not contain mines.\nUse the make_move tool to submit a move with parameters: row (0-based), col (0-based), and action_type ('reveal' or 'flag').\nFor example, call make_move with {\"row\": 4, \"col\": 0, \"action_type\": \"reveal\".\nOr call make_move with {\"row\": 6, \"col\": 5, \"action_type\": \"flag\".\nCells that are unrevealed are '.', revealed numbers show adjacent mine counts, and flagged cells are 'F'.\nAvoid revealing mines and use logic to deduce safe cells.\n\nImportant: Submit each move by calling the make_move tool with parameters {\"row\": <0-based>, \"col\": <0-based>, \"action_type\": \"reveal\" or \"flag\"}. Do not print moves like \\boxed{...}; always call the tool. When you make a move, respond only with a function call and no extra text.\n\n    0  1  2  3  4  5  6  7\n 0  .  .  .  .  .  .  .  . \n 1  .  .  .  .  .  .  .  . \n 2  .  .  .  .  .  .  .  . \n 3  .  .  .  .  .  .  .  . \n 4  .  .  .  .  .  .  .  . \n 5  .  .  .  .  .  .  .  . \n 6  .  .  .  .  .  .  .  . \n 7  .  .  .  .  .  .  .  . \n"}]}, "reward": 0.0, "total_moves": 5, "is_complete": true}
```