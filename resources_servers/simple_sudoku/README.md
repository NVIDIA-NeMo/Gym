## Details 

This is a resource server for sudoku text based game. The correctness is checked programtically. The reward is returned at each step (each call of the `make_move` function. The final reward is the sum)

**Dataset**: The dataset is proceduraly generated. But for it to be compatible with current trajectory generation framework. We have a `simple_sudoku.jsonl` and a script (steps below) that can be used to create a jsonl to use for trajectory generation. This would be changed later


## Steps to run


1. Download reference dataset

```
ng_download_dataset_from_gitlab \
    +dataset_name=sudoku_simple \
    +version=0.0.2 \
    +artifact_fpath=sudoku_simple.jsonl \
    +output_fpath=data/sudoku_simple.jsonl
```

2. Create a larger jsonl (the reference dataset just has 1 data point as reference for how the system prompt, tool definition should look like). Below generates 5 examples.

```
python generate_sudoku_jsonl.py ../../data/simple_sudoku.jsonl 5 ../../data/sudoku_batch.jsonl
```


2. Start the servers (this starts the simple_game_agent, the model server & the sudkoku environment server)

```
ng_run "+config_paths=[responses_api_agents/simple_game_agent/configs/simple_game_agent.yaml,responses_api_models/openai_model/configs/openai_model.yaml,resources_servers/simple_sudoku/configs/simple_sudoku.yaml]" +simple_game_agent.responses_api_agents.simple_game_agent.resources_server.name=simple_sudoku
```

3. Start trajectory collection
```
```
ng_collect_traj +agent_name=simple_game_agent +input_jsonl_fpath=data/sudoku_batch.jsonl +output_jtssonl_fpath=results/sudoku_output.jsonl
```
```

---

**Example Rollouts**:

```
{"responses_create_params": {"input": [{"content": "Let's play Sudoku! You will be given a board state and need to call the make_move function with the row, col and number you want to place.", "role": "user"}], "tools": [{"name": "make_move", "parameters": {"type": "object", "properties": {"row": {"type": "integer", "description": "Row number (1-4)"}, "col": {"type": "integer", "description": "Column number (1-4)"}, "number": {"type": "integer", "description": "Digit to place (1-4)"}}, "required": ["row", "col", "number"], "additionalProperties": false}, "strict": true, "type": "function", "description": "Place a digit in the Sudoku grid"}]}, "response": {"id": "resp_68a8fdb6a8048196bbc28db997cdc4a209936ff0c280239a", "created_at": 1755905462.0, "error": null, "incomplete_details": null, "instructions": null, "metadata": {}, "model": "gpt-4.1-2025-04-14", "object": "response", "output": [{"call_id": "get_initial_board", "output": "{\"instructions\": \"You are playing a simple version of Sudoku.\\nEach row is numbered from 1 to 4, and each column is also numbered from 1 to 4.\\nEmpty cells are represented by '.', and pre-filled cells contain digits from 1 to 4.\\n\\nYour objective is to fill the empty cells in the 4x4 grid with digits from 1 to 4 such that:\\n1. Each row contains all digits from 1 to 4 without repetition.\\n2. Each column contains all digits from 1 to 4 without repetition.\\n3. Each 2x2 subgrid contains all digits from 1 to 4 without repetition.\\n\\nRules and Instructions:\\n1. **Do not overwrite** the initial numbers provided in the grid.\\n2. **Only fill** empty cells represented by '.'.\\n3. You must respond with the format '\\\\boxed{row column number}', e.g. \\\\boxed{1 1 5}.\\n4. **Ensure** that your move does not violate Sudoku rules. Invalid moves will result in penalties.\\nUse the make_move function to submit your moves. Good luck!\\n\\n\", \"board_text\": \"   C1 C2   C3 C4  \\nR1  .  2 |  4  .\\nR2  4  . |  .  2\\n   - - - - - - \\nR3  2  . |  .  .\\nR4  1  4 |  2  .\", \"game_state\": {\"current_board\": [[0, 2, 4, 0], [4, 0, 0, 2], [2, 0, 0, 0], [1, 4, 2, 0]], \"solution\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 3, 1, 4], [1, 4, 2, 3]], \"scale\": 4, \"initial_empty_count\": 8, \"moves_made\": 0, \"correct_moves\": 0}}", "type": "function_call_output", "id": null, "status": null}, {"arguments": "{\"row\":1,\"col\":1,\"number\":3}", "call_id": "call_KKkCkrI3xHnwKgLGbEbx3N50", "name": "make_move", "type": "function_call", "id": "fc_68a8fdada6b88195bc4652d51adf48800f552bfe36226d50", "status": "completed"}, {"call_id": "call_KKkCkrI3xHnwKgLGbEbx3N50", "output": "{\"success\": true, \"message\": \"Correct move! R1 C1 = 3\", \"game_state\": {\"current_board\": [[3, 2, 4, 0], [4, 0, 0, 2], [2, 0, 0, 0], [1, 4, 2, 0]], \"solution\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 3, 1, 4], [1, 4, 2, 3]], \"scale\": 4, \"initial_empty_count\": 8, \"moves_made\": 1, \"correct_moves\": 1}, \"board_text\": \"   C1 C2   C3 C4  \\nR1  3  2 |  4  .\\nR2  4  . |  .  2\\n   - - - - - - \\nR3  2  . |  .  .\\nR4  1  4 |  2  .\", \"is_complete\": false, \"move_reward\": 0.125}", "type": "function_call_output", "id": null, "status": null}, {"arguments": "{\"row\":1,\"col\":4,\"number\":1}", "call_id": "call_qmKBuRt4lOgS0nqClVKBI87z", "name": "make_move", "type": "function_call", "id": "fc_68a8fdaec6e0819093cd0d524ff218610da22a7be20619a6", "status": "completed"}, {"call_id": "call_qmKBuRt4lOgS0nqClVKBI87z", "output": "{\"success\": true, \"message\": \"Correct move! R1 C4 = 1\", \"game_state\": {\"current_board\": [[3, 2, 4, 1], [4, 0, 0, 2], [2, 0, 0, 0], [1, 4, 2, 0]], \"solution\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 3, 1, 4], [1, 4, 2, 3]], \"scale\": 4, \"initial_empty_count\": 8, \"moves_made\": 2, \"correct_moves\": 2}, \"board_text\": \"   C1 C2   C3 C4  \\nR1  3  2 |  4  1\\nR2  4  . |  .  2\\n   - - - - - - \\nR3  2  . |  .  .\\nR4  1  4 |  2  .\", \"is_complete\": false, \"move_reward\": 0.125}", "type": "function_call_output", "id": null, "status": null}, {"arguments": "{\"row\":2,\"col\":2,\"number\":1}", "call_id": "call_WJ9bJMEFvYnzONiaK4IvxiRw", "name": "make_move", "type": "function_call", "id": "fc_68a8fdb01f708197855a478521a6060f02a4c509dc3bbef4", "status": "completed"}, {"call_id": "call_WJ9bJMEFvYnzONiaK4IvxiRw", "output": "{\"success\": true, \"message\": \"Correct move! R2 C2 = 1\", \"game_state\": {\"current_board\": [[3, 2, 4, 1], [4, 1, 0, 2], [2, 0, 0, 0], [1, 4, 2, 0]], \"solution\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 3, 1, 4], [1, 4, 2, 3]], \"scale\": 4, \"initial_empty_count\": 8, \"moves_made\": 3, \"correct_moves\": 3}, \"board_text\": \"   C1 C2   C3 C4  \\nR1  3  2 |  4  1\\nR2  4  1 |  .  2\\n   - - - - - - \\nR3  2  . |  .  .\\nR4  1  4 |  2  .\", \"is_complete\": false, \"move_reward\": 0.125}", "type": "function_call_output", "id": null, "status": null}, {"arguments": "{\"row\":2,\"col\":3,\"number\":3}", "call_id": "call_i49CfiSNw5Pg6ARZ4yzLFll1", "name": "make_move", "type": "function_call", "id": "fc_68a8fdb14c4081909f379e7cd59955a605b8fe3245059c12", "status": "completed"}, {"call_id": "call_i49CfiSNw5Pg6ARZ4yzLFll1", "output": "{\"success\": true, \"message\": \"Correct move! R2 C3 = 3\", \"game_state\": {\"current_board\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 0, 0, 0], [1, 4, 2, 0]], \"solution\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 3, 1, 4], [1, 4, 2, 3]], \"scale\": 4, \"initial_empty_count\": 8, \"moves_made\": 4, \"correct_moves\": 4}, \"board_text\": \"   C1 C2   C3 C4  \\nR1  3  2 |  4  1\\nR2  4  1 |  3  2\\n   - - - - - - \\nR3  2  . |  .  .\\nR4  1  4 |  2  .\", \"is_complete\": false, \"move_reward\": 0.125}", "type": "function_call_output", "id": null, "status": null}, {"arguments": "{\"row\":3,\"col\":2,\"number\":3}", "call_id": "call_3SAQ33v5GhqGwnAI7lkSNOMa", "name": "make_move", "type": "function_call", "id": "fc_68a8fdb270bc819385e35fc9d180d706039d26d12b44bf06", "status": "completed"}, {"arguments": "{\"row\":3,\"col\":3,\"number\":1}", "call_id": "call_F0q6mdhrmH1lxP2QWqCsdefg", "name": "make_move", "type": "function_call", "id": "fc_68a8fdb29e78819396993795926f1b15039d26d12b44bf06", "status": "completed"}, {"arguments": "{\"row\":3,\"col\":4,\"number\":4}", "call_id": "call_tboXTlbXSc76woE2aR1Nt3vz", "name": "make_move", "type": "function_call", "id": "fc_68a8fdb2ba548193898e504b33838227039d26d12b44bf06", "status": "completed"}, {"arguments": "{\"row\":4,\"col\":4,\"number\":3}", "call_id": "call_2aAHV1Ch4oRsxT1BGvuoppkr", "name": "make_move", "type": "function_call", "id": "fc_68a8fdb32c108193aabec2d15cf760da039d26d12b44bf06", "status": "completed"}, {"call_id": "call_2aAHV1Ch4oRsxT1BGvuoppkr", "output": "{\"success\": true, \"message\": \"Correct move! R4 C4 = 3\", \"game_state\": {\"current_board\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 0, 0, 0], [1, 4, 2, 3]], \"solution\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 3, 1, 4], [1, 4, 2, 3]], \"scale\": 4, \"initial_empty_count\": 8, \"moves_made\": 5, \"correct_moves\": 5}, \"board_text\": \"   C1 C2   C3 C4  \\nR1  3  2 |  4  1\\nR2  4  1 |  3  2\\n   - - - - - - \\nR3  2  . |  .  .\\nR4  1  4 |  2  3\", \"is_complete\": false, \"move_reward\": 0.125}", "type": "function_call_output", "id": null, "status": null}, {"arguments": "{\"row\":3,\"col\":2,\"number\":3}", "call_id": "call_fOkbPP71l1RUj1npmlhX7Yic", "name": "make_move", "type": "function_call", "id": "fc_68a8fdb44ebc81948c1a34cb972e78af0e920c38f4308c35", "status": "completed"}, {"arguments": "{\"row\":3,\"col\":3,\"number\":1}", "call_id": "call_oubLmNMB88YK49Y9cLyPqume", "name": "make_move", "type": "function_call", "id": "fc_68a8fdb4785c8194aa16788fd3343ddf0e920c38f4308c35", "status": "completed"}, {"arguments": "{\"row\":3,\"col\":4,\"number\":4}", "call_id": "call_uxyYko60x2SNQhhAxzfsHPxG", "name": "make_move", "type": "function_call", "id": "fc_68a8fdb4fa20819489084cfd70936c0b0e920c38f4308c35", "status": "completed"}, {"call_id": "call_uxyYko60x2SNQhhAxzfsHPxG", "output": "{\"success\": true, \"message\": \"Correct move! R3 C4 = 4\", \"game_state\": {\"current_board\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 0, 0, 4], [1, 4, 2, 3]], \"solution\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 3, 1, 4], [1, 4, 2, 3]], \"scale\": 4, \"initial_empty_count\": 8, \"moves_made\": 6, \"correct_moves\": 6}, \"board_text\": \"   C1 C2   C3 C4  \\nR1  3  2 |  4  1\\nR2  4  1 |  3  2\\n   - - - - - - \\nR3  2  . |  .  4\\nR4  1  4 |  2  3\", \"is_complete\": false, \"move_reward\": 0.125}", "type": "function_call_output", "id": null, "status": null}, {"arguments": "{\"row\":3,\"col\":2,\"number\":3}", "call_id": "call_yqR4L92kgIYK5CuXHuKW5HIn", "name": "make_move", "type": "function_call", "id": "fc_68a8fdb5f7b081939e467c2d9de3246d051b9c3e58cd6982", "status": "completed"}, {"arguments": "{\"row\":3,\"col\":3,\"number\":1}", "call_id": "call_JNfOw2jGMpimKKlKDtOk2PBt", "name": "make_move", "type": "function_call", "id": "fc_68a8fdb624848193910abcc9aaa5b610051b9c3e58cd6982", "status": "completed"}, {"call_id": "call_JNfOw2jGMpimKKlKDtOk2PBt", "output": "{\"success\": true, \"message\": \"Correct move! R3 C3 = 1\", \"game_state\": {\"current_board\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 0, 1, 4], [1, 4, 2, 3]], \"solution\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 3, 1, 4], [1, 4, 2, 3]], \"scale\": 4, \"initial_empty_count\": 8, \"moves_made\": 7, \"correct_moves\": 7}, \"board_text\": \"   C1 C2   C3 C4  \\nR1  3  2 |  4  1\\nR2  4  1 |  3  2\\n   - - - - - - \\nR3  2  . |  1  4\\nR4  1  4 |  2  3\", \"is_complete\": false, \"move_reward\": 0.125}", "type": "function_call_output", "id": null, "status": null}, {"arguments": "{\"row\":3,\"col\":2,\"number\":3}", "call_id": "call_Q5BEqVygOYBkm0DO2NdaS8UM", "name": "make_move", "type": "function_call", "id": "fc_68a8fdb772f48196a2cdad293d74822309936ff0c280239a", "status": "completed"}, {"call_id": "call_Q5BEqVygOYBkm0DO2NdaS8UM", "output": "{\"success\": true, \"message\": \"Correct move! R3 C2 = 3. Congratulations! Puzzle completed!\", \"game_state\": {\"current_board\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 3, 1, 4], [1, 4, 2, 3]], \"solution\": [[3, 2, 4, 1], [4, 1, 3, 2], [2, 3, 1, 4], [1, 4, 2, 3]], \"scale\": 4, \"initial_empty_count\": 8, \"moves_made\": 8, \"correct_moves\": 8}, \"board_text\": \"   C1 C2   C3 C4  \\nR1  3  2 |  4  1\\nR2  4  1 |  3  2\\n   - - - - - - \\nR3  2  3 |  1  4\\nR4  1  4 |  2  3\", \"is_complete\": true, \"move_reward\": 1.125}", "type": "function_call_output", "id": null, "status": null}], "parallel_tool_calls": true, "temperature": 1.0, "tool_choice": "auto", "tools": [{"name": "make_move", "parameters": {"type": "object", "properties": {"row": {"type": "integer", "description": "Row number (1-4)"}, "col": {"type": "integer", "description": "Column number (1-4)"}, "number": {"type": "integer", "description": "Digit to place (1-4)"}}, "required": ["row", "col", "number"], "additionalProperties": false}, "strict": true, "type": "function", "description": "Place a digit in the Sudoku grid"}], "top_p": 1.0, "background": false, "max_output_tokens": null, "max_tool_calls": null, "previous_response_id": null, "prompt": null, "reasoning": {"effort": null, "generate_summary": null, "summary": null}, "service_tier": "default", "status": "completed", "text": {"format": {"type": "text"}, "verbosity": "medium"}, "top_logprobs": 0, "truncation": "disabled", "usage": {"input_tokens": 1045, "input_tokens_details": {"cached_tokens": 0}, "output_tokens": 23, "output_tokens_details": {"reasoning_tokens": 0}, "total_tokens": 1068}, "user": null, "prompt_cache_key": null, "safety_identifier": null, "store": true}, "reward": 2.0, "total_moves": 8, "is_complete": true}
```

---