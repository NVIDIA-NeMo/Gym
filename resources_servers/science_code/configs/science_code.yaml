# SPDX-FileCopyrightText: Copyright (c) 2025 NVIDIA CORPORATION & AFFILIATES. All rights reserved.
# SPDX-License-Identifier: Apache-2.0
#
# ScienceCode environment configuration
# Uses LLM-as-judge to compare generated scientific Python code against reference solutions.
#
# Based on the SciCode benchmark for scientific computing code generation.

science_code_resources_server:
  resources_servers:
    science_code:
      entrypoint: app.py
      judge_model_server:
        type: responses_api_models
        name: policy_model
      judge_responses_create_params:
        input: []
      judge_endpoint_max_concurrency: null
      judge_equal_label: "[[A=B]]"
      judge_not_equal_label: "[[A!=B]]"

      # Swap check: Run second judge pass with swapped expected/generated to detect positional bias
      check_twice_swap: true
      # Reward when the second (swap) pass fails; default 0.0, can be -1.0
      reward_if_swap_fails: 0.0

      domain: coding
      verified: false
      description: Scientific code generation with LLM-as-a-judge equivalence checking
      value: Improve scientific computing code generation capabilities

science_code_simple_agent:
  responses_api_agents:
    simple_agent:
      entrypoint: app.py
      resources_server:
        type: resources_servers
        name: science_code_resources_server
      model_server:
        type: responses_api_models
        name: policy_model
      datasets:
      - name: example
        type: example
        jsonl_fpath: resources_servers/science_code/data/example.jsonl
        license: Creative Commons Attribution 4.0 International
